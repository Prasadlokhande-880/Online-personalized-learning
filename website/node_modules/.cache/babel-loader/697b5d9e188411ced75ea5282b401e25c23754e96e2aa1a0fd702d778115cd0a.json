{"ast":null,"code":"/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\nvar finalhandler = require('finalhandler');\nvar Router = require('./router');\nvar methods = require('methods');\nvar middleware = require('./middleware/init');\nvar query = require('./middleware/query');\nvar debug = require('debug')('express:application');\nvar View = require('./view');\nvar http = require('http');\nvar compileETag = require('./utils').compileETag;\nvar compileQueryParser = require('./utils').compileQueryParser;\nvar compileTrust = require('./utils').compileTrust;\nvar deprecate = require('depd')('express');\nvar flatten = require('array-flatten');\nvar merge = require('utils-merge');\nvar resolve = require('path').resolve;\nvar setPrototypeOf = require('setprototypeof');\n\n/**\n * Module variables.\n * @private\n */\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar slice = Array.prototype.slice;\n\n/**\n * Application prototype.\n */\n\nvar app = exports = module.exports = {};\n\n/**\n * Variable for trust proxy inheritance back-compat\n * @private\n */\n\nvar trustProxyDefaultSymbol = '@@symbol:trust_proxy_default';\n\n/**\n * Initialize the server.\n *\n *   - setup default configuration\n *   - setup default middleware\n *   - setup route reflection methods\n *\n * @private\n */\n\napp.init = function init() {\n  this.cache = {};\n  this.engines = {};\n  this.settings = {};\n  this.defaultConfiguration();\n};\n\n/**\n * Initialize application configuration.\n * @private\n */\n\napp.defaultConfiguration = function defaultConfiguration() {\n  var env = process.env.NODE_ENV || 'development';\n\n  // default settings\n  this.enable('x-powered-by');\n  this.set('etag', 'weak');\n  this.set('env', env);\n  this.set('query parser', 'extended');\n  this.set('subdomain offset', 2);\n  this.set('trust proxy', false);\n\n  // trust proxy inherit back-compat\n  Object.defineProperty(this.settings, trustProxyDefaultSymbol, {\n    configurable: true,\n    value: true\n  });\n  debug('booting in %s mode', env);\n  this.on('mount', function onmount(parent) {\n    // inherit trust proxy\n    if (this.settings[trustProxyDefaultSymbol] === true && typeof parent.settings['trust proxy fn'] === 'function') {\n      delete this.settings['trust proxy'];\n      delete this.settings['trust proxy fn'];\n    }\n\n    // inherit protos\n    setPrototypeOf(this.request, parent.request);\n    setPrototypeOf(this.response, parent.response);\n    setPrototypeOf(this.engines, parent.engines);\n    setPrototypeOf(this.settings, parent.settings);\n  });\n\n  // setup locals\n  this.locals = Object.create(null);\n\n  // top-most app is mounted at /\n  this.mountpath = '/';\n\n  // default locals\n  this.locals.settings = this.settings;\n\n  // default configuration\n  this.set('view', View);\n  this.set('views', resolve('views'));\n  this.set('jsonp callback name', 'callback');\n  if (env === 'production') {\n    this.enable('view cache');\n  }\n  Object.defineProperty(this, 'router', {\n    get: function () {\n      throw new Error('\\'app.router\\' is deprecated!\\nPlease see the 3.x to 4.x migration guide for details on how to update your app.');\n    }\n  });\n};\n\n/**\n * lazily adds the base router if it has not yet been added.\n *\n * We cannot add the base router in the defaultConfiguration because\n * it reads app settings which might be set after that has run.\n *\n * @private\n */\napp.lazyrouter = function lazyrouter() {\n  if (!this._router) {\n    this._router = new Router({\n      caseSensitive: this.enabled('case sensitive routing'),\n      strict: this.enabled('strict routing')\n    });\n    this._router.use(query(this.get('query parser fn')));\n    this._router.use(middleware.init(this));\n  }\n};\n\n/**\n * Dispatch a req, res pair into the application. Starts pipeline processing.\n *\n * If no callback is provided, then default error handlers will respond\n * in the event of an error bubbling through the stack.\n *\n * @private\n */\n\napp.handle = function handle(req, res, callback) {\n  var router = this._router;\n\n  // final handler\n  var done = callback || finalhandler(req, res, {\n    env: this.get('env'),\n    onerror: logerror.bind(this)\n  });\n\n  // no routes\n  if (!router) {\n    debug('no routes defined on app');\n    done();\n    return;\n  }\n  router.handle(req, res, done);\n};\n\n/**\n * Proxy `Router#use()` to add middleware to the app router.\n * See Router#use() documentation for details.\n *\n * If the _fn_ parameter is an express app, then it will be\n * mounted at the _route_ specified.\n *\n * @public\n */\n\napp.use = function use(fn) {\n  var offset = 0;\n  var path = '/';\n\n  // default path to '/'\n  // disambiguate app.use([fn])\n  if (typeof fn !== 'function') {\n    var arg = fn;\n    while (Array.isArray(arg) && arg.length !== 0) {\n      arg = arg[0];\n    }\n\n    // first arg is the path\n    if (typeof arg !== 'function') {\n      offset = 1;\n      path = fn;\n    }\n  }\n  var fns = flatten(slice.call(arguments, offset));\n  if (fns.length === 0) {\n    throw new TypeError('app.use() requires a middleware function');\n  }\n\n  // setup router\n  this.lazyrouter();\n  var router = this._router;\n  fns.forEach(function (fn) {\n    // non-express app\n    if (!fn || !fn.handle || !fn.set) {\n      return router.use(path, fn);\n    }\n    debug('.use app under %s', path);\n    fn.mountpath = path;\n    fn.parent = this;\n\n    // restore .app property on req and res\n    router.use(path, function mounted_app(req, res, next) {\n      var orig = req.app;\n      fn.handle(req, res, function (err) {\n        setPrototypeOf(req, orig.request);\n        setPrototypeOf(res, orig.response);\n        next(err);\n      });\n    });\n\n    // mounted an app\n    fn.emit('mount', this);\n  }, this);\n  return this;\n};\n\n/**\n * Proxy to the app `Router#route()`\n * Returns a new `Route` instance for the _path_.\n *\n * Routes are isolated middleware stacks for specific paths.\n * See the Route api docs for details.\n *\n * @public\n */\n\napp.route = function route(path) {\n  this.lazyrouter();\n  return this._router.route(path);\n};\n\n/**\n * Register the given template engine callback `fn`\n * as `ext`.\n *\n * By default will `require()` the engine based on the\n * file extension. For example if you try to render\n * a \"foo.ejs\" file Express will invoke the following internally:\n *\n *     app.engine('ejs', require('ejs').__express);\n *\n * For engines that do not provide `.__express` out of the box,\n * or if you wish to \"map\" a different extension to the template engine\n * you may use this method. For example mapping the EJS template engine to\n * \".html\" files:\n *\n *     app.engine('html', require('ejs').renderFile);\n *\n * In this case EJS provides a `.renderFile()` method with\n * the same signature that Express expects: `(path, options, callback)`,\n * though note that it aliases this method as `ejs.__express` internally\n * so if you're using \".ejs\" extensions you don't need to do anything.\n *\n * Some template engines do not follow this convention, the\n * [Consolidate.js](https://github.com/tj/consolidate.js)\n * library was created to map all of node's popular template\n * engines to follow this convention, thus allowing them to\n * work seamlessly within Express.\n *\n * @param {String} ext\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\napp.engine = function engine(ext, fn) {\n  if (typeof fn !== 'function') {\n    throw new Error('callback function required');\n  }\n\n  // get file extension\n  var extension = ext[0] !== '.' ? '.' + ext : ext;\n\n  // store engine\n  this.engines[extension] = fn;\n  return this;\n};\n\n/**\n * Proxy to `Router#param()` with one added api feature. The _name_ parameter\n * can be an array of names.\n *\n * See the Router#param() docs for more details.\n *\n * @param {String|Array} name\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\napp.param = function param(name, fn) {\n  this.lazyrouter();\n  if (Array.isArray(name)) {\n    for (var i = 0; i < name.length; i++) {\n      this.param(name[i], fn);\n    }\n    return this;\n  }\n  this._router.param(name, fn);\n  return this;\n};\n\n/**\n * Assign `setting` to `val`, or return `setting`'s value.\n *\n *    app.set('foo', 'bar');\n *    app.set('foo');\n *    // => \"bar\"\n *\n * Mounted servers inherit their parent server's settings.\n *\n * @param {String} setting\n * @param {*} [val]\n * @return {Server} for chaining\n * @public\n */\n\napp.set = function set(setting, val) {\n  if (arguments.length === 1) {\n    // app.get(setting)\n    var settings = this.settings;\n    while (settings && settings !== Object.prototype) {\n      if (hasOwnProperty.call(settings, setting)) {\n        return settings[setting];\n      }\n      settings = Object.getPrototypeOf(settings);\n    }\n    return undefined;\n  }\n  debug('set \"%s\" to %o', setting, val);\n\n  // set value\n  this.settings[setting] = val;\n\n  // trigger matched settings\n  switch (setting) {\n    case 'etag':\n      this.set('etag fn', compileETag(val));\n      break;\n    case 'query parser':\n      this.set('query parser fn', compileQueryParser(val));\n      break;\n    case 'trust proxy':\n      this.set('trust proxy fn', compileTrust(val));\n\n      // trust proxy inherit back-compat\n      Object.defineProperty(this.settings, trustProxyDefaultSymbol, {\n        configurable: true,\n        value: false\n      });\n      break;\n  }\n  return this;\n};\n\n/**\n * Return the app's absolute pathname\n * based on the parent(s) that have\n * mounted it.\n *\n * For example if the application was\n * mounted as \"/admin\", which itself\n * was mounted as \"/blog\" then the\n * return value would be \"/blog/admin\".\n *\n * @return {String}\n * @private\n */\n\napp.path = function path() {\n  return this.parent ? this.parent.path() + this.mountpath : '';\n};\n\n/**\n * Check if `setting` is enabled (truthy).\n *\n *    app.enabled('foo')\n *    // => false\n *\n *    app.enable('foo')\n *    app.enabled('foo')\n *    // => true\n *\n * @param {String} setting\n * @return {Boolean}\n * @public\n */\n\napp.enabled = function enabled(setting) {\n  return Boolean(this.set(setting));\n};\n\n/**\n * Check if `setting` is disabled.\n *\n *    app.disabled('foo')\n *    // => true\n *\n *    app.enable('foo')\n *    app.disabled('foo')\n *    // => false\n *\n * @param {String} setting\n * @return {Boolean}\n * @public\n */\n\napp.disabled = function disabled(setting) {\n  return !this.set(setting);\n};\n\n/**\n * Enable `setting`.\n *\n * @param {String} setting\n * @return {app} for chaining\n * @public\n */\n\napp.enable = function enable(setting) {\n  return this.set(setting, true);\n};\n\n/**\n * Disable `setting`.\n *\n * @param {String} setting\n * @return {app} for chaining\n * @public\n */\n\napp.disable = function disable(setting) {\n  return this.set(setting, false);\n};\n\n/**\n * Delegate `.VERB(...)` calls to `router.VERB(...)`.\n */\n\nmethods.forEach(function (method) {\n  app[method] = function (path) {\n    if (method === 'get' && arguments.length === 1) {\n      // app.get(setting)\n      return this.set(path);\n    }\n    this.lazyrouter();\n    var route = this._router.route(path);\n    route[method].apply(route, slice.call(arguments, 1));\n    return this;\n  };\n});\n\n/**\n * Special-cased \"all\" method, applying the given route `path`,\n * middleware, and callback to _every_ HTTP method.\n *\n * @param {String} path\n * @param {Function} ...\n * @return {app} for chaining\n * @public\n */\n\napp.all = function all(path) {\n  this.lazyrouter();\n  var route = this._router.route(path);\n  var args = slice.call(arguments, 1);\n  for (var i = 0; i < methods.length; i++) {\n    route[methods[i]].apply(route, args);\n  }\n  return this;\n};\n\n// del -> delete alias\n\napp.del = deprecate.function(app.delete, 'app.del: Use app.delete instead');\n\n/**\n * Render the given view `name` name with `options`\n * and a callback accepting an error and the\n * rendered template string.\n *\n * Example:\n *\n *    app.render('email', { name: 'Tobi' }, function(err, html){\n *      // ...\n *    })\n *\n * @param {String} name\n * @param {Object|Function} options or fn\n * @param {Function} callback\n * @public\n */\n\napp.render = function render(name, options, callback) {\n  var cache = this.cache;\n  var done = callback;\n  var engines = this.engines;\n  var opts = options;\n  var renderOptions = {};\n  var view;\n\n  // support callback function as second arg\n  if (typeof options === 'function') {\n    done = options;\n    opts = {};\n  }\n\n  // merge app.locals\n  merge(renderOptions, this.locals);\n\n  // merge options._locals\n  if (opts._locals) {\n    merge(renderOptions, opts._locals);\n  }\n\n  // merge options\n  merge(renderOptions, opts);\n\n  // set .cache unless explicitly provided\n  if (renderOptions.cache == null) {\n    renderOptions.cache = this.enabled('view cache');\n  }\n\n  // primed cache\n  if (renderOptions.cache) {\n    view = cache[name];\n  }\n\n  // view\n  if (!view) {\n    var View = this.get('view');\n    view = new View(name, {\n      defaultEngine: this.get('view engine'),\n      root: this.get('views'),\n      engines: engines\n    });\n    if (!view.path) {\n      var dirs = Array.isArray(view.root) && view.root.length > 1 ? 'directories \"' + view.root.slice(0, -1).join('\", \"') + '\" or \"' + view.root[view.root.length - 1] + '\"' : 'directory \"' + view.root + '\"';\n      var err = new Error('Failed to lookup view \"' + name + '\" in views ' + dirs);\n      err.view = view;\n      return done(err);\n    }\n\n    // prime the cache\n    if (renderOptions.cache) {\n      cache[name] = view;\n    }\n  }\n\n  // render\n  tryRender(view, renderOptions, done);\n};\n\n/**\n * Listen for connections.\n *\n * A node `http.Server` is returned, with this\n * application (which is a `Function`) as its\n * callback. If you wish to create both an HTTP\n * and HTTPS server you may do so with the \"http\"\n * and \"https\" modules as shown here:\n *\n *    var http = require('http')\n *      , https = require('https')\n *      , express = require('express')\n *      , app = express();\n *\n *    http.createServer(app).listen(80);\n *    https.createServer({ ... }, app).listen(443);\n *\n * @return {http.Server}\n * @public\n */\n\napp.listen = function listen() {\n  var server = http.createServer(this);\n  return server.listen.apply(server, arguments);\n};\n\n/**\n * Log error using console.error.\n *\n * @param {Error} err\n * @private\n */\n\nfunction logerror(err) {\n  /* istanbul ignore next */\n  if (this.get('env') !== 'test') console.error(err.stack || err.toString());\n}\n\n/**\n * Try rendering a view.\n * @private\n */\n\nfunction tryRender(view, options, callback) {\n  try {\n    view.render(options, callback);\n  } catch (err) {\n    callback(err);\n  }\n}","map":{"version":3,"names":["finalhandler","require","Router","methods","middleware","query","debug","View","http","compileETag","compileQueryParser","compileTrust","deprecate","flatten","merge","resolve","setPrototypeOf","hasOwnProperty","Object","prototype","slice","Array","app","exports","module","trustProxyDefaultSymbol","init","cache","engines","settings","defaultConfiguration","env","process","NODE_ENV","enable","set","defineProperty","configurable","value","on","onmount","parent","request","response","locals","create","mountpath","get","Error","lazyrouter","_router","caseSensitive","enabled","strict","use","handle","req","res","callback","router","done","onerror","logerror","bind","fn","offset","path","arg","isArray","length","fns","call","arguments","TypeError","forEach","mounted_app","next","orig","err","emit","route","engine","ext","extension","param","name","i","setting","val","getPrototypeOf","undefined","Boolean","disabled","disable","method","apply","all","args","del","function","delete","render","options","opts","renderOptions","view","_locals","defaultEngine","root","dirs","join","tryRender","listen","server","createServer","console","error","stack","toString"],"sources":["/Users/prasadlokhande/Documents/GitHub/Online-personalized-learning/website/node_modules/express/lib/application.js"],"sourcesContent":["/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar finalhandler = require('finalhandler');\nvar Router = require('./router');\nvar methods = require('methods');\nvar middleware = require('./middleware/init');\nvar query = require('./middleware/query');\nvar debug = require('debug')('express:application');\nvar View = require('./view');\nvar http = require('http');\nvar compileETag = require('./utils').compileETag;\nvar compileQueryParser = require('./utils').compileQueryParser;\nvar compileTrust = require('./utils').compileTrust;\nvar deprecate = require('depd')('express');\nvar flatten = require('array-flatten');\nvar merge = require('utils-merge');\nvar resolve = require('path').resolve;\nvar setPrototypeOf = require('setprototypeof')\n\n/**\n * Module variables.\n * @private\n */\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty\nvar slice = Array.prototype.slice;\n\n/**\n * Application prototype.\n */\n\nvar app = exports = module.exports = {};\n\n/**\n * Variable for trust proxy inheritance back-compat\n * @private\n */\n\nvar trustProxyDefaultSymbol = '@@symbol:trust_proxy_default';\n\n/**\n * Initialize the server.\n *\n *   - setup default configuration\n *   - setup default middleware\n *   - setup route reflection methods\n *\n * @private\n */\n\napp.init = function init() {\n  this.cache = {};\n  this.engines = {};\n  this.settings = {};\n\n  this.defaultConfiguration();\n};\n\n/**\n * Initialize application configuration.\n * @private\n */\n\napp.defaultConfiguration = function defaultConfiguration() {\n  var env = process.env.NODE_ENV || 'development';\n\n  // default settings\n  this.enable('x-powered-by');\n  this.set('etag', 'weak');\n  this.set('env', env);\n  this.set('query parser', 'extended');\n  this.set('subdomain offset', 2);\n  this.set('trust proxy', false);\n\n  // trust proxy inherit back-compat\n  Object.defineProperty(this.settings, trustProxyDefaultSymbol, {\n    configurable: true,\n    value: true\n  });\n\n  debug('booting in %s mode', env);\n\n  this.on('mount', function onmount(parent) {\n    // inherit trust proxy\n    if (this.settings[trustProxyDefaultSymbol] === true\n      && typeof parent.settings['trust proxy fn'] === 'function') {\n      delete this.settings['trust proxy'];\n      delete this.settings['trust proxy fn'];\n    }\n\n    // inherit protos\n    setPrototypeOf(this.request, parent.request)\n    setPrototypeOf(this.response, parent.response)\n    setPrototypeOf(this.engines, parent.engines)\n    setPrototypeOf(this.settings, parent.settings)\n  });\n\n  // setup locals\n  this.locals = Object.create(null);\n\n  // top-most app is mounted at /\n  this.mountpath = '/';\n\n  // default locals\n  this.locals.settings = this.settings;\n\n  // default configuration\n  this.set('view', View);\n  this.set('views', resolve('views'));\n  this.set('jsonp callback name', 'callback');\n\n  if (env === 'production') {\n    this.enable('view cache');\n  }\n\n  Object.defineProperty(this, 'router', {\n    get: function() {\n      throw new Error('\\'app.router\\' is deprecated!\\nPlease see the 3.x to 4.x migration guide for details on how to update your app.');\n    }\n  });\n};\n\n/**\n * lazily adds the base router if it has not yet been added.\n *\n * We cannot add the base router in the defaultConfiguration because\n * it reads app settings which might be set after that has run.\n *\n * @private\n */\napp.lazyrouter = function lazyrouter() {\n  if (!this._router) {\n    this._router = new Router({\n      caseSensitive: this.enabled('case sensitive routing'),\n      strict: this.enabled('strict routing')\n    });\n\n    this._router.use(query(this.get('query parser fn')));\n    this._router.use(middleware.init(this));\n  }\n};\n\n/**\n * Dispatch a req, res pair into the application. Starts pipeline processing.\n *\n * If no callback is provided, then default error handlers will respond\n * in the event of an error bubbling through the stack.\n *\n * @private\n */\n\napp.handle = function handle(req, res, callback) {\n  var router = this._router;\n\n  // final handler\n  var done = callback || finalhandler(req, res, {\n    env: this.get('env'),\n    onerror: logerror.bind(this)\n  });\n\n  // no routes\n  if (!router) {\n    debug('no routes defined on app');\n    done();\n    return;\n  }\n\n  router.handle(req, res, done);\n};\n\n/**\n * Proxy `Router#use()` to add middleware to the app router.\n * See Router#use() documentation for details.\n *\n * If the _fn_ parameter is an express app, then it will be\n * mounted at the _route_ specified.\n *\n * @public\n */\n\napp.use = function use(fn) {\n  var offset = 0;\n  var path = '/';\n\n  // default path to '/'\n  // disambiguate app.use([fn])\n  if (typeof fn !== 'function') {\n    var arg = fn;\n\n    while (Array.isArray(arg) && arg.length !== 0) {\n      arg = arg[0];\n    }\n\n    // first arg is the path\n    if (typeof arg !== 'function') {\n      offset = 1;\n      path = fn;\n    }\n  }\n\n  var fns = flatten(slice.call(arguments, offset));\n\n  if (fns.length === 0) {\n    throw new TypeError('app.use() requires a middleware function')\n  }\n\n  // setup router\n  this.lazyrouter();\n  var router = this._router;\n\n  fns.forEach(function (fn) {\n    // non-express app\n    if (!fn || !fn.handle || !fn.set) {\n      return router.use(path, fn);\n    }\n\n    debug('.use app under %s', path);\n    fn.mountpath = path;\n    fn.parent = this;\n\n    // restore .app property on req and res\n    router.use(path, function mounted_app(req, res, next) {\n      var orig = req.app;\n      fn.handle(req, res, function (err) {\n        setPrototypeOf(req, orig.request)\n        setPrototypeOf(res, orig.response)\n        next(err);\n      });\n    });\n\n    // mounted an app\n    fn.emit('mount', this);\n  }, this);\n\n  return this;\n};\n\n/**\n * Proxy to the app `Router#route()`\n * Returns a new `Route` instance for the _path_.\n *\n * Routes are isolated middleware stacks for specific paths.\n * See the Route api docs for details.\n *\n * @public\n */\n\napp.route = function route(path) {\n  this.lazyrouter();\n  return this._router.route(path);\n};\n\n/**\n * Register the given template engine callback `fn`\n * as `ext`.\n *\n * By default will `require()` the engine based on the\n * file extension. For example if you try to render\n * a \"foo.ejs\" file Express will invoke the following internally:\n *\n *     app.engine('ejs', require('ejs').__express);\n *\n * For engines that do not provide `.__express` out of the box,\n * or if you wish to \"map\" a different extension to the template engine\n * you may use this method. For example mapping the EJS template engine to\n * \".html\" files:\n *\n *     app.engine('html', require('ejs').renderFile);\n *\n * In this case EJS provides a `.renderFile()` method with\n * the same signature that Express expects: `(path, options, callback)`,\n * though note that it aliases this method as `ejs.__express` internally\n * so if you're using \".ejs\" extensions you don't need to do anything.\n *\n * Some template engines do not follow this convention, the\n * [Consolidate.js](https://github.com/tj/consolidate.js)\n * library was created to map all of node's popular template\n * engines to follow this convention, thus allowing them to\n * work seamlessly within Express.\n *\n * @param {String} ext\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\napp.engine = function engine(ext, fn) {\n  if (typeof fn !== 'function') {\n    throw new Error('callback function required');\n  }\n\n  // get file extension\n  var extension = ext[0] !== '.'\n    ? '.' + ext\n    : ext;\n\n  // store engine\n  this.engines[extension] = fn;\n\n  return this;\n};\n\n/**\n * Proxy to `Router#param()` with one added api feature. The _name_ parameter\n * can be an array of names.\n *\n * See the Router#param() docs for more details.\n *\n * @param {String|Array} name\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\napp.param = function param(name, fn) {\n  this.lazyrouter();\n\n  if (Array.isArray(name)) {\n    for (var i = 0; i < name.length; i++) {\n      this.param(name[i], fn);\n    }\n\n    return this;\n  }\n\n  this._router.param(name, fn);\n\n  return this;\n};\n\n/**\n * Assign `setting` to `val`, or return `setting`'s value.\n *\n *    app.set('foo', 'bar');\n *    app.set('foo');\n *    // => \"bar\"\n *\n * Mounted servers inherit their parent server's settings.\n *\n * @param {String} setting\n * @param {*} [val]\n * @return {Server} for chaining\n * @public\n */\n\napp.set = function set(setting, val) {\n  if (arguments.length === 1) {\n    // app.get(setting)\n    var settings = this.settings\n\n    while (settings && settings !== Object.prototype) {\n      if (hasOwnProperty.call(settings, setting)) {\n        return settings[setting]\n      }\n\n      settings = Object.getPrototypeOf(settings)\n    }\n\n    return undefined\n  }\n\n  debug('set \"%s\" to %o', setting, val);\n\n  // set value\n  this.settings[setting] = val;\n\n  // trigger matched settings\n  switch (setting) {\n    case 'etag':\n      this.set('etag fn', compileETag(val));\n      break;\n    case 'query parser':\n      this.set('query parser fn', compileQueryParser(val));\n      break;\n    case 'trust proxy':\n      this.set('trust proxy fn', compileTrust(val));\n\n      // trust proxy inherit back-compat\n      Object.defineProperty(this.settings, trustProxyDefaultSymbol, {\n        configurable: true,\n        value: false\n      });\n\n      break;\n  }\n\n  return this;\n};\n\n/**\n * Return the app's absolute pathname\n * based on the parent(s) that have\n * mounted it.\n *\n * For example if the application was\n * mounted as \"/admin\", which itself\n * was mounted as \"/blog\" then the\n * return value would be \"/blog/admin\".\n *\n * @return {String}\n * @private\n */\n\napp.path = function path() {\n  return this.parent\n    ? this.parent.path() + this.mountpath\n    : '';\n};\n\n/**\n * Check if `setting` is enabled (truthy).\n *\n *    app.enabled('foo')\n *    // => false\n *\n *    app.enable('foo')\n *    app.enabled('foo')\n *    // => true\n *\n * @param {String} setting\n * @return {Boolean}\n * @public\n */\n\napp.enabled = function enabled(setting) {\n  return Boolean(this.set(setting));\n};\n\n/**\n * Check if `setting` is disabled.\n *\n *    app.disabled('foo')\n *    // => true\n *\n *    app.enable('foo')\n *    app.disabled('foo')\n *    // => false\n *\n * @param {String} setting\n * @return {Boolean}\n * @public\n */\n\napp.disabled = function disabled(setting) {\n  return !this.set(setting);\n};\n\n/**\n * Enable `setting`.\n *\n * @param {String} setting\n * @return {app} for chaining\n * @public\n */\n\napp.enable = function enable(setting) {\n  return this.set(setting, true);\n};\n\n/**\n * Disable `setting`.\n *\n * @param {String} setting\n * @return {app} for chaining\n * @public\n */\n\napp.disable = function disable(setting) {\n  return this.set(setting, false);\n};\n\n/**\n * Delegate `.VERB(...)` calls to `router.VERB(...)`.\n */\n\nmethods.forEach(function(method){\n  app[method] = function(path){\n    if (method === 'get' && arguments.length === 1) {\n      // app.get(setting)\n      return this.set(path);\n    }\n\n    this.lazyrouter();\n\n    var route = this._router.route(path);\n    route[method].apply(route, slice.call(arguments, 1));\n    return this;\n  };\n});\n\n/**\n * Special-cased \"all\" method, applying the given route `path`,\n * middleware, and callback to _every_ HTTP method.\n *\n * @param {String} path\n * @param {Function} ...\n * @return {app} for chaining\n * @public\n */\n\napp.all = function all(path) {\n  this.lazyrouter();\n\n  var route = this._router.route(path);\n  var args = slice.call(arguments, 1);\n\n  for (var i = 0; i < methods.length; i++) {\n    route[methods[i]].apply(route, args);\n  }\n\n  return this;\n};\n\n// del -> delete alias\n\napp.del = deprecate.function(app.delete, 'app.del: Use app.delete instead');\n\n/**\n * Render the given view `name` name with `options`\n * and a callback accepting an error and the\n * rendered template string.\n *\n * Example:\n *\n *    app.render('email', { name: 'Tobi' }, function(err, html){\n *      // ...\n *    })\n *\n * @param {String} name\n * @param {Object|Function} options or fn\n * @param {Function} callback\n * @public\n */\n\napp.render = function render(name, options, callback) {\n  var cache = this.cache;\n  var done = callback;\n  var engines = this.engines;\n  var opts = options;\n  var renderOptions = {};\n  var view;\n\n  // support callback function as second arg\n  if (typeof options === 'function') {\n    done = options;\n    opts = {};\n  }\n\n  // merge app.locals\n  merge(renderOptions, this.locals);\n\n  // merge options._locals\n  if (opts._locals) {\n    merge(renderOptions, opts._locals);\n  }\n\n  // merge options\n  merge(renderOptions, opts);\n\n  // set .cache unless explicitly provided\n  if (renderOptions.cache == null) {\n    renderOptions.cache = this.enabled('view cache');\n  }\n\n  // primed cache\n  if (renderOptions.cache) {\n    view = cache[name];\n  }\n\n  // view\n  if (!view) {\n    var View = this.get('view');\n\n    view = new View(name, {\n      defaultEngine: this.get('view engine'),\n      root: this.get('views'),\n      engines: engines\n    });\n\n    if (!view.path) {\n      var dirs = Array.isArray(view.root) && view.root.length > 1\n        ? 'directories \"' + view.root.slice(0, -1).join('\", \"') + '\" or \"' + view.root[view.root.length - 1] + '\"'\n        : 'directory \"' + view.root + '\"'\n      var err = new Error('Failed to lookup view \"' + name + '\" in views ' + dirs);\n      err.view = view;\n      return done(err);\n    }\n\n    // prime the cache\n    if (renderOptions.cache) {\n      cache[name] = view;\n    }\n  }\n\n  // render\n  tryRender(view, renderOptions, done);\n};\n\n/**\n * Listen for connections.\n *\n * A node `http.Server` is returned, with this\n * application (which is a `Function`) as its\n * callback. If you wish to create both an HTTP\n * and HTTPS server you may do so with the \"http\"\n * and \"https\" modules as shown here:\n *\n *    var http = require('http')\n *      , https = require('https')\n *      , express = require('express')\n *      , app = express();\n *\n *    http.createServer(app).listen(80);\n *    https.createServer({ ... }, app).listen(443);\n *\n * @return {http.Server}\n * @public\n */\n\napp.listen = function listen() {\n  var server = http.createServer(this);\n  return server.listen.apply(server, arguments);\n};\n\n/**\n * Log error using console.error.\n *\n * @param {Error} err\n * @private\n */\n\nfunction logerror(err) {\n  /* istanbul ignore next */\n  if (this.get('env') !== 'test') console.error(err.stack || err.toString());\n}\n\n/**\n * Try rendering a view.\n * @private\n */\n\nfunction tryRender(view, options, callback) {\n  try {\n    view.render(options, callback);\n  } catch (err) {\n    callback(err);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}